(this["webpackJsonpwhatsapp-clone-web"]=this["webpackJsonpwhatsapp-clone-web"]||[]).push([[0],{75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){"use strict";a.r(t);var c=a(4),n=a(2),s=a.n(n),r=a(29),o=a.n(r),i=(a(75),a(15)),j=(a(76),a(77),a(106)),d=a(104),l=a(56),h=a.n(l),u=a(55),b=a.n(u),m=a(43),O=a.n(m),p=a(44),x=a.n(p),f=(a(78),a(32)),v=f.a.initializeApp({apiKey:"AIzaSyAjMFt_O0OVoQ_igC1Yv34_8PTEkTqlm0I",authDomain:"whats-app-clone-e5e73.firebaseapp.com",projectId:"whats-app-clone-e5e73",storageBucket:"whats-app-clone-e5e73.appspot.com",messagingSenderId:"608922762354",appId:"1:608922762354:web:025c21ed40785ef7a956eb",measurementId:"G-EHBN9L69V8"}).firestore(),g=f.a.auth(),N=new f.a.auth.GoogleAuthProvider,_=a(33);var w=function(e){var t,a=e.addChat,s=e.roomId,r=e.name,o=Object(n.useState)(""),d=Object(i.a)(o,2),l=d[0],h=d[1],u=Object(n.useState)(""),b=Object(i.a)(u,2),m=b[0],O=b[1];return Object(n.useEffect)((function(){h(Math.floor(5e3*Math.random()))}),[]),Object(n.useEffect)((function(){s&&v.collection("rooms").doc(s).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return O(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[s]),a?Object(c.jsx)("div",{onClick:function(){var e=prompt("Enter A name");e&&v.collection("rooms").add({name:e})},className:"chats",children:Object(c.jsx)("h2",{children:"Add New Chat"})}):Object(c.jsx)(_.b,{to:"/rooms/".concat(s),children:Object(c.jsxs)("div",{className:"chats",children:[Object(c.jsx)(j.a,{src:"https://avatars.dicebear.com/api/human/".concat(l,".svg")}),Object(c.jsxs)("div",{className:"chats_info",children:[Object(c.jsx)("h3",{children:r}),Object(c.jsx)("p",{children:null===(t=m[0])||void 0===t?void 0:t.data.message})]})]})})},S=Object(n.createContext)(),y=function(e){var t=e.reducer,a=e.initialState,s=e.children;return Object(c.jsx)(S.Provider,{value:Object(n.useReducer)(t,a),children:s})},C=function(){return Object(n.useContext)(S)};var E=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],s=t[1],r=C(),o=Object(i.a)(r,1)[0].user;return Object(n.useEffect)((function(){var e=v.collection("rooms").onSnapshot((function(e){return s(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}));return function(){e()}}),[]),Object(c.jsxs)("div",{className:"sidebar",children:[Object(c.jsxs)("div",{className:"sidebar_header",children:[Object(c.jsx)(j.a,{src:null===o||void 0===o?void 0:o.photoURL}),Object(c.jsxs)("div",{className:"sidebar_headerright",children:[Object(c.jsx)(d.a,{children:Object(c.jsx)(b.a,{})}),Object(c.jsx)(d.a,{children:Object(c.jsx)(h.a,{})}),Object(c.jsx)(d.a,{children:Object(c.jsx)(O.a,{})})]})]}),Object(c.jsx)("div",{className:"sidebar_search",children:Object(c.jsxs)("div",{className:"sidebar_search_component",children:[Object(c.jsx)(d.a,{children:Object(c.jsx)(x.a,{})}),Object(c.jsx)("input",{placeholder:"Lets chat",type:"text"})]})}),Object(c.jsxs)("div",{className:"sidebar_chatsGroups",children:[Object(c.jsx)(w,{addChat:!0}),a.map((function(e){return Object(c.jsx)(w,{roomId:e.id,name:e.data.name},e.id)}))]})]})},I=(a(87),a(59)),k=a.n(I),D=a(57),M=a.n(D),T=a(58),A=a.n(T),B=a(60),F=a.n(B),W=a(10);var L=function(){var e,t,a,s,r=Object(n.useState)(""),o=Object(i.a)(r,2),l=o[0],h=o[1],u=Object(n.useState)(""),b=Object(i.a)(u,2),m=b[0],p=b[1],g=Object(W.f)().roomId,N=Object(n.useState)(""),_=Object(i.a)(N,2),w=_[0],S=_[1],y=Object(n.useState)([]),E=Object(i.a)(y,2),I=E[0],D=E[1],T=C(),B=Object(i.a)(T,2),L=B[0].user,R=(B[1],Object(n.useRef)(null)),G=function(){return R.current.scrollIntoView()};return Object(n.useEffect)((function(){g&&(v.collection("rooms").doc(g).onSnapshot((function(e){return S(e.data().name)})),v.collection("rooms").doc(g).collection("messages").orderBy("timestamp","asc").onSnapshot((function(e){return D(e.docs.map((function(e){return{id:e.id,data:e.data()}})))})),G())}),[g]),Object(n.useEffect)((function(){p(Math.floor(5e3*Math.random()))}),[g]),Object(c.jsxs)("div",{className:"chatroom",children:[Object(c.jsxs)("div",{className:"chatroom_header",children:[Object(c.jsx)(j.a,{src:"https://avatars.dicebear.com/4.5/api/human/".concat(m,".svg")}),Object(c.jsxs)("div",{className:"chat_info",children:[Object(c.jsx)("h3",{children:w}),Object(c.jsxs)("p",{children:["last message"," ",new Date(null===(e=I[I.length-1])||void 0===e||null===(t=e.data.timestamp)||void 0===t?void 0:t.toDate()).toDateString()," "," ",new Date(null===(a=I[I.length-1])||void 0===a||null===(s=a.data.timestamp)||void 0===s?void 0:s.toDate()).toLocaleTimeString()]})]}),Object(c.jsxs)("div",{className:"chatroom_header_inforight",children:[Object(c.jsx)(d.a,{children:Object(c.jsx)(x.a,{})}),Object(c.jsx)(d.a,{children:Object(c.jsx)(M.a,{})}),Object(c.jsx)(d.a,{children:Object(c.jsx)(O.a,{})})]})]}),Object(c.jsxs)("div",{className:"chatroom_body",id:"chatroom_body",children:[I.map((function(e){var t;return Object(c.jsxs)("p",{className:"chatroom_message ".concat(e.data.name===L.displayName&&"chatroom_messagerecierver"),children:[Object(c.jsx)("span",{className:"sender_name",children:e.data.name}),e.data.message,Object(c.jsx)("span",{className:"sender_timestamp ",children:new Date(null===(t=e.data.timestamp)||void 0===t?void 0:t.toDate()).toLocaleTimeString()})]},e.id)})),Object(c.jsx)("div",{ref:R,className:"scroll_to_bottom",children:" hi"})]}),Object(c.jsxs)("div",{className:"chatroom_footer",children:[Object(c.jsx)(A.a,{}),Object(c.jsxs)("form",{children:[Object(c.jsx)("input",{type:"text",value:l,onChange:function(e){return h(e.target.value)},placeholder:"Type your message here",required:"required"}),Object(c.jsx)("button",{onClick:function(e){e.preventDefault(),v.collection("rooms").doc(g).collection("messages").add({message:l,name:L.displayName,timestamp:f.a.firestore.FieldValue.serverTimestamp()}),h(""),G()},type:"submit",children:Object(c.jsx)(k.a,{})})]}),Object(c.jsx)(F.a,{})]})]})},R=a(61),G=(a(88),a(105)),P=a(48),V="SET_USER",q=function(e,t){switch(t.type){case V:return Object(P.a)(Object(P.a)({},e),{},{user:t.user});default:return e}},z=function(){var e=C(),t=Object(i.a)(e,2);Object(R.a)(t[0]);var a=t[1];return Object(c.jsx)("div",{className:"login",children:Object(c.jsxs)("div",{className:"login_container",children:[Object(c.jsx)("img",{src:"https://gumlet.assettype.com/freepressjournal%2Fimport%2F2018%2F11%2FWhatsapp.jpg?auto=format%2Ccompress&format=webp&w=640&dpr=1.0",alt:""}),Object(c.jsx)("div",{className:"login_text",children:Object(c.jsx)("h1",{children:"Sign in to Whats app clone"})}),Object(c.jsx)(G.a,{onClick:function(){g.signInWithPopup(N).then((function(e){a({type:V,user:e.user})})).catch((function(e){return alert(e.messege)}))},children:"Sign In With Google"})]})})};a(89);var J=function(){return Object(c.jsx)("div",{className:"chat_intro",children:Object(c.jsx)("span",{children:" Cloned by Md. Motiur Rahman"})})},U=a(62),H=a(63),K=a(65),Q=a(64),Y=function(e){Object(K.a)(a,e);var t=Object(Q.a)(a);function a(e){var c;return Object(U.a)(this,a),(c=t.call(this,e)).state={hasError:!1},c}return Object(H.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?Object(c.jsx)("h1",{children:" There is some error"}):this.props.children}}]),a}(n.Component);var $=function(){var e=C(),t=Object(i.a)(e,1)[0].user;return Object(c.jsx)("div",{className:"app",children:t?Object(c.jsx)("div",{className:"app_container",children:Object(c.jsx)(Y,{children:Object(c.jsxs)(_.a,{children:[Object(c.jsx)(E,{}),Object(c.jsxs)(W.c,{children:[Object(c.jsx)(W.a,{path:"/rooms/:roomId",children:Object(c.jsx)(L,{})}),Object(c.jsx)(W.a,{path:"/",children:Object(c.jsx)(J,{})})]})]})})}):Object(c.jsx)(z,{})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(y,{initialState:{user:null},reducer:q,children:Object(c.jsx)($,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[90,1,2]]]);
//# sourceMappingURL=main.5c4c082f.chunk.js.map