(this["webpackJsonpwhatsapp-clone-web"]=this["webpackJsonpwhatsapp-clone-web"]||[]).push([[0],{75:function(e,t,c){},76:function(e,t,c){},77:function(e,t,c){},78:function(e,t,c){},87:function(e,t,c){},88:function(e,t,c){},89:function(e,t,c){},90:function(e,t,c){"use strict";c.r(t);var a=c(4),n=c(2),s=c.n(n),r=c(29),o=c.n(r),i=(c(75),c(15)),j=(c(76),c(77),c(106)),d=c(104),l=c(56),h=c.n(l),u=c(55),b=c.n(u),m=c(43),O=c.n(m),p=c(44),x=c.n(p),f=(c(78),c(32)),v=f.a.initializeApp({apiKey:"AIzaSyDHyPqemBrlngiZwkcmZF58HEI5D3iUjTo",authDomain:"whats-app-clone-78905.firebaseapp.com",projectId:"whats-app-clone-78905",storageBucket:"whats-app-clone-78905.appspot.com",messagingSenderId:"217263856394",appId:"1:217263856394:web:012ea2e057929e015d78f3",measurementId:"G-GSELSTCEF9"}).firestore(),g=f.a.auth(),N=new f.a.auth.GoogleAuthProvider,w=c(33);var S=function(e){var t,c=e.addChat,s=e.roomId,r=e.name,o=Object(n.useState)(""),d=Object(i.a)(o,2),l=d[0],h=d[1],u=Object(n.useState)(""),b=Object(i.a)(u,2),m=b[0],O=b[1];return Object(n.useEffect)((function(){h(Math.floor(5e3*Math.random()))}),[]),Object(n.useEffect)((function(){s&&v.collection("rooms").doc(s).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return O(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[s]),c?Object(a.jsx)("div",{onClick:function(){var e=prompt("Enter A name");e&&v.collection("rooms").add({name:e})},className:"chats",children:Object(a.jsx)("h2",{children:"Add New Chat"})}):Object(a.jsx)(w.b,{to:"/rooms/".concat(s),children:Object(a.jsxs)("div",{className:"chats",children:[Object(a.jsx)(j.a,{src:"https://avatars.dicebear.com/api/human/".concat(l,".svg")}),Object(a.jsxs)("div",{className:"chats_info",children:[Object(a.jsx)("h3",{children:r}),Object(a.jsx)("p",{children:null===(t=m[0])||void 0===t?void 0:t.data.message})]})]})})},_=Object(n.createContext)(),y=function(e){var t=e.reducer,c=e.initialState,s=e.children;return Object(a.jsx)(_.Provider,{value:Object(n.useReducer)(t,c),children:s})},E=function(){return Object(n.useContext)(_)};var C=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),c=t[0],s=t[1],r=E(),o=Object(i.a)(r,1)[0].user;return Object(n.useEffect)((function(){var e=v.collection("rooms").onSnapshot((function(e){return s(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}));return function(){e()}}),[]),Object(a.jsxs)("div",{className:"sidebar",children:[Object(a.jsxs)("div",{className:"sidebar_header",children:[Object(a.jsx)(j.a,{src:null===o||void 0===o?void 0:o.photoURL}),Object(a.jsxs)("div",{className:"sidebar_headerright",children:[Object(a.jsx)(d.a,{children:Object(a.jsx)(b.a,{})}),Object(a.jsx)(d.a,{children:Object(a.jsx)(h.a,{})}),Object(a.jsx)(d.a,{children:Object(a.jsx)(O.a,{})})]})]}),Object(a.jsx)("div",{className:"sidebar_search",children:Object(a.jsxs)("div",{className:"sidebar_search_component",children:[Object(a.jsx)(d.a,{children:Object(a.jsx)(x.a,{})}),Object(a.jsx)("input",{placeholder:"Lets chat",type:"text"})]})}),Object(a.jsxs)("div",{className:"sidebar_chatsGroups",children:[Object(a.jsx)(S,{addChat:!0}),c.map((function(e){return Object(a.jsx)(S,{roomId:e.id,name:e.data.name},e.id)}))]})]})},I=(c(87),c(59)),D=c.n(I),k=c(57),T=c.n(k),F=c(58),M=c.n(F),B=c(60),W=c.n(B),A=c(10);var G=function(){var e,t,c,s,r=Object(n.useState)(""),o=Object(i.a)(r,2),l=o[0],h=o[1],u=Object(n.useState)(""),b=Object(i.a)(u,2),m=b[0],p=b[1],g=Object(A.f)().roomId,N=Object(n.useState)(""),w=Object(i.a)(N,2),S=w[0],_=w[1],y=Object(n.useState)([]),C=Object(i.a)(y,2),I=C[0],k=C[1],F=E(),B=Object(i.a)(F,2),G=B[0].user,L=(B[1],Object(n.useRef)(null)),R=function(){return L.current.scrollIntoView()};return Object(n.useEffect)((function(){g&&(v.collection("rooms").doc(g).onSnapshot((function(e){return _(e.data().name)})),v.collection("rooms").doc(g).collection("messages").orderBy("timestamp","asc").onSnapshot((function(e){return k(e.docs.map((function(e){return{id:e.id,data:e.data()}})))})),R())}),[g]),Object(n.useEffect)((function(){p(Math.floor(5e3*Math.random()))}),[g]),Object(a.jsxs)("div",{className:"chatroom",children:[Object(a.jsxs)("div",{className:"chatroom_header",children:[Object(a.jsx)(j.a,{src:"https://avatars.dicebear.com/4.5/api/human/".concat(m,".svg")}),Object(a.jsxs)("div",{className:"chat_info",children:[Object(a.jsx)("h3",{children:S}),Object(a.jsxs)("p",{children:["last message"," ",new Date(null===(e=I[I.length-1])||void 0===e||null===(t=e.data.timestamp)||void 0===t?void 0:t.toDate()).toDateString()," "," ",new Date(null===(c=I[I.length-1])||void 0===c||null===(s=c.data.timestamp)||void 0===s?void 0:s.toDate()).toLocaleTimeString()]})]}),Object(a.jsxs)("div",{className:"chatroom_header_inforight",children:[Object(a.jsx)(d.a,{children:Object(a.jsx)(x.a,{})}),Object(a.jsx)(d.a,{children:Object(a.jsx)(T.a,{})}),Object(a.jsx)(d.a,{children:Object(a.jsx)(O.a,{})})]})]}),Object(a.jsxs)("div",{className:"chatroom_body",id:"chatroom_body",children:[I.map((function(e){var t;return Object(a.jsxs)("p",{className:"chatroom_message ".concat(e.data.name===G.displayName&&"chatroom_messagerecierver"),children:[Object(a.jsx)("span",{className:"sender_name",children:e.data.name}),e.data.message,Object(a.jsx)("span",{className:"sender_timestamp ",children:new Date(null===(t=e.data.timestamp)||void 0===t?void 0:t.toDate()).toLocaleTimeString()})]},e.id)})),Object(a.jsx)("div",{ref:L,className:"scroll_to_bottom",children:" hi"})]}),Object(a.jsxs)("div",{className:"chatroom_footer",children:[Object(a.jsx)(M.a,{}),Object(a.jsxs)("form",{children:[Object(a.jsx)("input",{type:"text",value:l,onChange:function(e){return h(e.target.value)},placeholder:"Type your message here",required:"required"}),Object(a.jsx)("button",{onClick:function(e){e.preventDefault(),v.collection("rooms").doc(g).collection("messages").add({message:l,name:G.displayName,timestamp:f.a.firestore.FieldValue.serverTimestamp()}),h(""),R()},type:"submit",children:Object(a.jsx)(D.a,{})})]}),Object(a.jsx)(W.a,{})]})]})},L=c(61),R=(c(88),c(105)),P=c(48),q="SET_USER",U=function(e,t){switch(console.log(t),t.type){case q:return Object(P.a)(Object(P.a)({},e),{},{user:t.user});default:return e}},z=function(){var e=E(),t=Object(i.a)(e,2);Object(L.a)(t[0]);var c=t[1];return Object(a.jsx)("div",{className:"login",children:Object(a.jsxs)("div",{className:"login_container",children:[Object(a.jsx)("img",{src:"https://gumlet.assettype.com/freepressjournal%2Fimport%2F2018%2F11%2FWhatsapp.jpg?auto=format%2Ccompress&format=webp&w=640&dpr=1.0",alt:""}),Object(a.jsx)("div",{className:"login_text",children:Object(a.jsx)("h1",{children:"Sign in to Whats app clone"})}),Object(a.jsx)(R.a,{onClick:function(){g.signInWithPopup(N).then((function(e){c({type:q,user:e.user})})).catch((function(e){return alert(e.messege)}))},children:"Sign In With Google"})]})})};c(89);var H=function(){return Object(a.jsx)("div",{className:"chat_intro",children:Object(a.jsx)("span",{children:" Cloned by Md. Motiur Rahman"})})},J=c(62),V=c(63),Z=c(65),K=c(64),$=function(e){Object(Z.a)(c,e);var t=Object(K.a)(c);function c(e){var a;return Object(J.a)(this,c),(a=t.call(this,e)).state={hasError:!1},a}return Object(V.a)(c,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?Object(a.jsx)("h1",{children:" There is some error"}):this.props.children}}]),c}(n.Component);var Q=function(){var e=E(),t=Object(i.a)(e,1)[0].user;return Object(a.jsx)("div",{className:"app",children:t?Object(a.jsx)("div",{className:"app_container",children:Object(a.jsx)($,{children:Object(a.jsxs)(w.a,{children:[Object(a.jsx)(C,{}),Object(a.jsxs)(A.c,{children:[Object(a.jsx)(A.a,{path:"/rooms/:roomId",children:Object(a.jsx)(G,{})}),Object(a.jsx)(A.a,{path:"/",children:Object(a.jsx)(H,{})})]})]})})}):Object(a.jsx)(z,{})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(y,{initialState:{user:null},reducer:U,children:Object(a.jsx)(Q,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[90,1,2]]]);
//# sourceMappingURL=main.b0fce839.chunk.js.map